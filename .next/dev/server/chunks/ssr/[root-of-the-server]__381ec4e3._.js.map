{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rakib/Learning/shortner-new/app/%5Bid%5D/RedirectComponent.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/[id]/RedirectComponent.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/[id]/RedirectComponent.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0]}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rakib/Learning/shortner-new/app/%5Bid%5D/RedirectComponent.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/[id]/RedirectComponent.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/[id]/RedirectComponent.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","ignoreList":[0]}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Rakib/Learning/shortner-new/app/%5Bid%5D/page.tsx"],"sourcesContent":["import fs from \"fs/promises\";\r\nimport path from \"path\";\r\nimport { notFound } from \"next/navigation\";\r\nimport RedirectComponent from \"./RedirectComponent\";\r\n\r\n// Force runtime rendering and disable static regeneration. Without this,\r\n// Next.js may try to pre-render pages and not pick up new entries in\r\n// the JSON file, which would lead to a 404 for dynamic ids.\r\nexport const dynamic = 'force-dynamic';\r\nexport const revalidate = 0;\r\n\r\ninterface LinkEntry {\r\n  id: string;\r\n  image: string;\r\n  urlMobile: string;\r\n  urlDesktop?: string;\r\n}\r\n\r\n/**\r\n * Server component that resolves the provided id to a stored link entry.\r\n *\r\n * If the id exists in the data store, it renders a client component that\r\n * displays the loading image and performs a timed redirect. Otherwise it\r\n * triggers the notFound() helper to render the 404 page.\r\n */\r\nexport default async function Page({ params }: { params: Promise<{ id: string }> }) {\r\n  // Params is a promise in Next.js 15; we must await it to retrieve the id\r\n  const { id } = await params;\r\n  const dataFile = path.join(process.cwd(), 'data', 'links.json');\r\n  // Read the data file. If it's missing or invalid, initialise linksData to\r\n  // an empty object instead of returning early. This avoids inadvertently\r\n  // triggering a 404 due to a parse error or missing file.\r\n  let linksData: Record<string, any> = {};\r\n  try {\r\n    const json = await fs.readFile(dataFile, 'utf8');\r\n    linksData = JSON.parse(json);\r\n  } catch {\r\n    linksData = {};\r\n  }\r\n  // Determine if the data is flat or nested. If flat, look up the id\r\n  // directly. If nested, search through all user namespaces to find\r\n  // the entry. If not found return a 404.\r\n  const hasFlatEntries = Object.values(linksData).some(\r\n    (v: any) => v && typeof v === 'object' && 'id' in v\r\n  );\r\n  let entry: LinkEntry | undefined;\r\n  if (hasFlatEntries) {\r\n    entry = linksData[id] as LinkEntry;\r\n  } else {\r\n    for (const user of Object.keys(linksData)) {\r\n      const userEntries = linksData[user] ?? {};\r\n      if (userEntries && typeof userEntries === 'object' && id in userEntries) {\r\n        entry = userEntries[id] as LinkEntry;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  if (!entry) {\r\n    return notFound();\r\n  }\r\n  return (\r\n    <RedirectComponent\r\n      image={entry.image}\r\n      urlMobile={entry.urlMobile}\r\n      urlDesktop={entry.urlDesktop}\r\n    />\r\n  );\r\n}"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;;;;;;AAKO,MAAM,UAAU;AAChB,MAAM,aAAa;AAgBX,eAAe,KAAK,EAAE,MAAM,EAAuC;IAChF,yEAAyE;IACzE,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;IAClD,0EAA0E;IAC1E,wEAAwE;IACxE,yDAAyD;IACzD,IAAI,YAAiC,CAAC;IACtC,IAAI;QACF,MAAM,OAAO,MAAM,gIAAE,CAAC,QAAQ,CAAC,UAAU;QACzC,YAAY,KAAK,KAAK,CAAC;IACzB,EAAE,OAAM;QACN,YAAY,CAAC;IACf;IACA,mEAAmE;IACnE,kEAAkE;IAClE,wCAAwC;IACxC,MAAM,iBAAiB,OAAO,MAAM,CAAC,WAAW,IAAI,CAClD,CAAC,IAAW,KAAK,OAAO,MAAM,YAAY,QAAQ;IAEpD,IAAI;IACJ,IAAI,gBAAgB;QAClB,QAAQ,SAAS,CAAC,GAAG;IACvB,OAAO;QACL,KAAK,MAAM,QAAQ,OAAO,IAAI,CAAC,WAAY;YACzC,MAAM,cAAc,SAAS,CAAC,KAAK,IAAI,CAAC;YACxC,IAAI,eAAe,OAAO,gBAAgB,YAAY,MAAM,aAAa;gBACvE,QAAQ,WAAW,CAAC,GAAG;gBACvB;YACF;QACF;IACF;IACA,IAAI,CAAC,OAAO;QACV,OAAO,IAAA,iMAAQ;IACjB;IACA,qBACE,8OAAC,8IAAiB;QAChB,OAAO,MAAM,KAAK;QAClB,WAAW,MAAM,SAAS;QAC1B,YAAY,MAAM,UAAU;;;;;;AAGlC"}}]
}